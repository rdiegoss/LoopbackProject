module.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=32)}([function(e,t){e.exports=require("metal")},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e),this.body_={}}return o(e,[{key:"body",value:function(){return this.body_}},{key:"toString",value:function(){return JSON.stringify(this.body())}}],[{key:"toBody",value:function(t){return t instanceof e?t.body():t}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){if(!p.default.window)throw new Error("Sign-in type not supported in this environment")}function u(e,t){if(!h.core.isDefAndNotNull(e))throw new Error(t)}function i(e,t){if(h.core.isNull(e))throw new Error(t)}function a(e,t){if(!h.core.isFunction(e))throw new Error(t)}function s(e,t){if(!h.core.isObject(e))throw new Error(t)}function l(e){if(!e.succeeded())throw e.body();return e}function c(e){if(!h.core.isDefAndNotNull(e))throw new Error("You must be signed-in to perform this operation")}function f(e,t){if(new v.default(e).getPathname().length>1)throw new Error(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.assertUriWithNoPath=t.assertUserSignedIn=t.assertResponseSucceeded=t.assertObject=t.assertFunction=t.assertNotNull=t.assertDefAndNotNull=t.assertBrowserEnvironment=void 0;var h=n(0),d=n(11),p=r(d),y=n(4),v=r(y);t.assertBrowserEnvironment=o,t.assertDefAndNotNull=u,t.assertNotNull=i,t.assertFunction=a,t.assertObject=s,t.assertResponseSucceeded=l,t.assertUserSignedIn=c,t.assertUriWithNoPath=f},function(e,t){e.exports=require("metal-structs")},function(e,t){e.exports=require("metal-uri")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=n(1),f=r(c),h=n(22),d=r(h),p=n(12),y=r(p),v=n(7),b=r(v),_=function(e){function t(e,n,r){u(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.body_=new d.default(e,n,r),o}return a(t,e),s(t,[{key:"add",value:function(e,n,r,o){var u=n?t.toFilter(n,r,o):null;return this.body_.add(e,u),this}},{key:"addMany",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.body_).addMany.apply(t,[e].concat(r)),this}},{key:"and",value:function(e,t,n){return this.add("and",e,t,n)}},{key:"body",value:function(){return this.body_.getObject()}},{key:"or",value:function(e,t,n){return this.add("or",e,t,n)}}],[{key:"any",value:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return 1===r.length&&Array.isArray(r[0])&&(r=r[0]),new t(e,"any",r)}},{key:"boundingBox",value:function(e,n,r){return n instanceof y.default.BoundingBox?t.polygon.apply(t,[e].concat(o(n.getPoints()))):t.polygon(e,n,r)}},{key:"distance",value:function(e,n,r){var o=n,u=r;return n instanceof y.default.Circle?(o=n.getCenter(),u=b.default.to(n.getRadius())):r instanceof b.default||(u=b.default.to(r)),t.distanceInternal_(e,o,u)}},{key:"distanceInternal_",value:function(e,n,r){var o={location:f.default.toBody(n)};return r=r.body(),r.from&&(o.min=r.from),r.to&&(o.max=r.to),t.field(e,"gd",o)}},{key:"equal",value:function(e,n){return new t(e,"=",n)}},{key:"exists",value:function(e){return t.field(e,"exists",null)}},{key:"fuzzy",value:function(e,n,r){return t.fuzzyInternal_("fuzzy",e,n,r)}},{key:"fuzzyInternal_",value:function(e,n,r,o){var u=l.core.isString(r),i={query:u?r:n},a=u?o:r;a&&(i.fuzziness=a);var s=u?n:t.ALL;return t.field(s,e,i)}},{key:"gt",value:function(e,n){return new t(e,">",n)}},{key:"gte",value:function(e,n){return new t(e,">=",n)}},{key:"match",value:function(e,n){var r=l.core.isString(n)?e:t.ALL,o=l.core.isString(n)?n:e;return t.field(r,"match",o)}},{key:"missing",value:function(e){return t.field(e,"missing",null)}},{key:"phrase",value:function(e,n){var r=l.core.isString(n)?e:t.ALL,o=l.core.isString(n)?n:e;return t.field(r,"phrase",o)}},{key:"polygon",value:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r=r.map(function(e){return f.default.toBody(e)}),t.field(e,"gp",r)}},{key:"prefix",value:function(e,n){var r=l.core.isDefAndNotNull(n)?e:t.ALL,o=l.core.isDefAndNotNull(n)?n:e;return t.field(r,"prefix",o)}},{key:"range",value:function(e,n,r){var o=n;return o instanceof b.default||(o=b.default.range(n,r)),t.field(e,"range",o)}},{key:"regex",value:function(e,n){return new t(e,"~",n)}},{key:"shape",value:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r=r.map(function(e){return f.default.toBody(e)});var u={type:"geometrycollection",geometries:r};return t.field(e,"gs",u)}},{key:"similar",value:function(e,n){var r=l.core.isString(n)?e:t.ALL,o={query:l.core.isString(n)?n:e};return t.field(r,"similar",o)}},{key:"lt",value:function(e,n){return new t(e,"<",n)}},{key:"lte",value:function(e,n){return new t(e,"<=",n)}},{key:"none",value:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return 1===r.length&&Array.isArray(r[0])&&(r=r[0]),new t(e,"none",r)}},{key:"notEqual",value:function(e,n){return new t(e,"!=",n)}},{key:"not",value:function(e,n,r){return t.toFilter(e,n,r).add("not")}},{key:"field",value:function(e,n,r){return new t(e,n,r)}},{key:"toFilter",value:function(e,n,r){var o=e;return o instanceof t||(o=t.field(e,n,r)),o}}]),t}(f.default);_.ALL="*",t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),l=n(1),c=r(l),f=n(5),h=r(f),d=n(21),p=r(d),y=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"aggregate",value:function(e,t,n){var r=t;r instanceof p.default||(r=p.default.field(t,n));var o=r.getField(),u={};return u[o]={name:e,operator:r.getOperator()},s.core.isDefAndNotNull(r.getValue())&&(u[o].value=r.getValue()),this.body_.aggregation||(this.body_.aggregation=[]),this.body_.aggregation.push(u),this}},{key:"count",value:function(){return this.type("count")}},{key:"fetch",value:function(){return this.type("fetch")}},{key:"filter",value:function(e,t,n){var r=h.default.toFilter(e,t,n);return this.body_.filter||(this.body_.filter=[]),this.body_.filter.push(r.body()),this}},{key:"offset",value:function(e){return this.body_.offset=e,this}},{key:"highlight",value:function(e){return this.body_.highlight||(this.body_.highlight=[]),this.body_.highlight.push(e),this}},{key:"limit",value:function(e){return this.body_.limit=e,this}},{key:"search",value:function(e,t,n){var r=e;return n?r=h.default.field(e,t,n):t?r=h.default.match(e,t):!r||r instanceof h.default||(r=h.default.match(e)),this.type("search"),r&&this.filter(r),this}},{key:"sort",value:function(e,t){this.body_.sort||(this.body_.sort=[]);var n={};return n[e]=t||"asc",this.body_.sort.push(n),this}},{key:"type",value:function(e){return this.body_.type=e,this}}],[{key:"aggregate",value:function(e,n,r){return(new t).aggregate(e,n,r)}},{key:"count",value:function(){return(new t).type("count")}},{key:"fetch",value:function(){return(new t).type("fetch")}},{key:"filter",value:function(e,n,r){return(new t).filter(e,n,r)}},{key:"offset",value:function(e){return(new t).offset(e)}},{key:"highlight",value:function(e){return(new t).highlight(e)}},{key:"limit",value:function(e){return(new t).limit(e)}},{key:"search",value:function(e,n,r){return(new t).search(e,n,r)}},{key:"sort",value:function(e,n){return(new t).sort(e,n)}},{key:"type",value:function(e){return(new t).type(e)}}]),t}(c.default);t.default=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(e,n){r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.core.isDefAndNotNull(e)&&(u.body_.from=e),a.core.isDefAndNotNull(n)&&(u.body_.to=n),u}return u(t,e),i(t,null,[{key:"from",value:function(e){return new t(e)}},{key:"range",value:function(e,n){return new t(e,n)}},{key:"to",value:function(e){return new t(null,e)}}]),t}(l.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),i=n(3),a=n(9),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(t){r(this,e),(0,u.assertDefAndNotNull)(t,"WeDeploy client reference must be specified"),this.wedeployClient=t,this.headers_=new i.MultiMap}return o(e,[{key:"header",value:function(e,t){if(2!==arguments.length)throw new Error("Invalid arguments");return this.headers_.set(e,t),this}},{key:"auth",value:function(e,t){return this.helperAuthScope=s.default.create(e,t),this.helperAuthScope.wedeployClient=this.wedeployClient,this}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),i=n(3),a=n(2),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,e),this.token=u.core.isString(n)?null:t,this.email=u.core.isString(n)?t:null,this.password=n,this.createdAt=null,this.id=null,this.name=null,this.photoUrl=null,this.supportedScopes=[],this.wedeployClient=null,this.headers_=new i.MultiMap}return o(e,[{key:"getCreatedAt",value:function(){return this.createdAt}},{key:"getEmail",value:function(){return this.email}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getPassword",value:function(){return this.password}},{key:"getPhotoUrl",value:function(){return this.photoUrl}},{key:"getSupportedScopes",value:function(){return this.supportedScopes}},{key:"getToken",value:function(){return this.token}},{key:"hasCreatedAt",value:function(){return u.core.isDefAndNotNull(this.createdAt)}},{key:"hasEmail",value:function(){return u.core.isDefAndNotNull(this.email)}},{key:"hasId",value:function(){return u.core.isDefAndNotNull(this.id)}},{key:"hasName",value:function(){return u.core.isDefAndNotNull(this.name)}},{key:"hasPassword",value:function(){return u.core.isDefAndNotNull(this.password)}},{key:"hasPhotoUrl",value:function(){return u.core.isDefAndNotNull(this.photoUrl)}},{key:"hasSupportedScopes",value:function(e){var t=this;return Array.isArray(e)?e.every(function(e){return t.supportedScopes.indexOf(e)>-1}):this.supportedScopes.indexOf(e)>-1}},{key:"hasToken",value:function(){return u.core.isDefAndNotNull(this.token)}},{key:"setCreatedAt",value:function(e){this.createdAt=e}},{key:"setEmail",value:function(e){this.email=e}},{key:"setHeaders",value:function(e){var t=this;e instanceof i.MultiMap||(e=i.MultiMap.fromObject(e)),e.names().forEach(function(n){e.getAll(n).forEach(function(e){t.headers_.set(n,e)})})}},{key:"setId",value:function(e){this.id=e}},{key:"setName",value:function(e){this.name=e}},{key:"setPassword",value:function(e){this.password=e}},{key:"setPhotoUrl",value:function(e){this.photoUrl=e}},{key:"setSupportedScopes",value:function(e){this.supportedScopes=e}},{key:"setToken",value:function(e){this.token=e}},{key:"setWedeployClient",value:function(e,t){this.authUrl=t,this.wedeployClient=e}},{key:"updateUser",value:function(e){return(0,a.assertObject)(e,"User data must be specified as object"),this.buildUrl_().path("/users",this.getId().toString()).auth(this).patch(e).then(function(e){return(0,a.assertResponseSucceeded)(e)})}},{key:"deleteUser",value:function(){return(0,a.assertDefAndNotNull)(this.getId(),"Cannot delete user without id"),this.buildUrl_().path("/users",this.getId().toString()).auth(this).delete().then(function(e){return(0,a.assertResponseSucceeded)(e)})}},{key:"buildUrl_",value:function(){return(0,a.assertDefAndNotNull)(this.authUrl,"Cannot perform operation without an auth url"),this.wedeployClient.url(this.authUrl).headers(this.headers_)}}],[{key:"create",value:function(t,n){return t instanceof e?t:(0,u.isString)(t)&&(0,u.isString)(n)?new e(t,n):(0,u.isString)(t)&&!(0,u.isDef)(n)?new e(t):(0,u.isDefAndNotNull)(t)&&(0,u.isObject)(t)?e.createFromData(t):new e}},{key:"createFromData",value:function(t,n){var r=new e;if((0,u.isObject)(t)){var o={};Object.keys(t).forEach(function(e){o[e]={enumerable:!0,value:t[e],writable:!0}}),Object.defineProperties(r,o)}return r.setWedeployClient(this.wedeployClient,n),r}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(s.core.isDefAndNotNull(e)&&!s.core.isString(e))throw new Error(t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=n(0),l=function(){function e(){r(this,e),this.provider=null,this.providerScope=null,this.redirectUri=null,this.scope=null}return u(e,[{key:"hasProvider",value:function(){return s.core.isDefAndNotNull(this.provider)}},{key:"hasProviderScope",value:function(){return s.core.isDefAndNotNull(this.providerScope)}},{key:"hasRedirectUri",value:function(){return s.core.isDefAndNotNull(this.redirectUri)}},{key:"hasScope",value:function(){return s.core.isDefAndNotNull(this.scope)}},{key:"makeAuthorizationUrl",value:function(e){var t=new a.default(e);return t.setPathname("/oauth/authorize"),this.hasProvider()&&t.setParameterValue("provider",this.getProvider()),this.hasProviderScope()&&t.setParameterValue("provider_scope",this.getProviderScope()),this.hasRedirectUri()&&t.setParameterValue("redirect_uri",this.getRedirectUri()),this.hasScope()&&t.setParameterValue("scope",this.getScope()),t.isUsingDefaultProtocol()&&t.setProtocol("https:"),t.toString()}},{key:"getProvider",value:function(){return this.provider}},{key:"getProviderScope",value:function(){return this.providerScope}},{key:"getRedirectUri",value:function(){return this.redirectUri}},{key:"getScope",value:function(){return this.scope}},{key:"setProviderScope",value:function(e){o(e,"Provider scope must be a string"),this.providerScope=e}},{key:"setRedirectUri",value:function(e){o(e,"Redirect uri must be a string"),this.redirectUri=e}},{key:"setScope",value:function(e){o(e,"Scope must be a string"),this.scope=e}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};"undefined"!=typeof window&&(r.window=window),"undefined"!=typeof document&&(r.document=document),t.default=r},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(){u(this,e)}return i(e,null,[{key:"boundingBox",value:function(t,n){return new e.BoundingBox(t,n)}},{key:"circle",value:function(t,n){return new e.Circle(t,n)}},{key:"line",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e.Line,[null].concat(n)))}},{key:"point",value:function(t,n){return new e.Point(t,n)}},{key:"polygon",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e.Polygon,[null].concat(n)))}}]),e}(),c=function(e){function t(e,n){u(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.body_=[e,n],o}return o(t,e),t}(s.default);l.Point=c;var f=function(e){function t(){u(this,t);for(var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return e.body_={type:"linestring",coordinates:o.map(function(e){return s.default.toBody(e)})},e}return o(t,e),t}(s.default);l.Line=f;var h=function(e){function t(e,n){u(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.body_={type:"envelope",coordinates:[s.default.toBody(e),s.default.toBody(n)]},o}return o(t,e),i(t,[{key:"getPoints",value:function(){return this.body_.coordinates}}]),t}(s.default);l.BoundingBox=h;var d=function(e){function t(e,n){u(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.body_={type:"circle",coordinates:s.default.toBody(e),radius:n},o}return o(t,e),i(t,[{key:"getCenter",value:function(){return this.body_.coordinates}},{key:"getRadius",value:function(){return this.body_.radius}}]),t}(s.default);l.Circle=d;var p=function(e){function t(){u(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.body_={type:"polygon",coordinates:[]},e.addCoordinates_.apply(e,arguments),e}return o(t,e),i(t,[{key:"addCoordinates_",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.body_.coordinates.push(t.map(function(e){return s.default.toBody(e)}))}},{key:"hole",value:function(){return this.addCoordinates_.apply(this,arguments),this}}]),t}(s.default);l.Polygon=p,t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(28),i=function(e){return e&&e.__esModule?e:{default:e}}(u),a=function(){function e(){r(this,e),this.transports={},this.transports[e.DEFAULT_TRANSPORT_NAME]=e[e.DEFAULT_TRANSPORT_NAME]}return o(e,[{key:"get",value:function(e){var t=this.transports[e];if(!t)throw new Error("Invalid transport name: "+e);try{return new t}catch(e){throw new Error("Can not create transport",e)}}},{key:"getDefault",value:function(){return this.get(e.DEFAULT_TRANSPORT_NAME)}}],[{key:"instance",value:function(){return e.instance_||(e.instance_=new e),e.instance_}}]),e}();a.DEFAULT_TRANSPORT_NAME="default",a[a.DEFAULT_TRANSPORT_NAME]=i.default,t.default=a},function(e,t){e.exports=require("form-data")},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),i=n(3),a=function(){function e(){r(this,e),this.headers_=new i.MultiMap}return o(e,[{key:"body",value:function(e){return u.core.isDef(e)?(this.body_=e,this):this.body_}},{key:"header",value:function(e,t){if(2!==arguments.length)throw new Error("Invalid arguments");return this.headers_.set(e,t),this}},{key:"headers",value:function(e){return u.core.isDef(e)?(e instanceof i.MultiMap?this.headers_=e:this.headers_.values=e,e):this.headers_}},{key:"removeBody",value:function(){this.body_=void 0}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),s=n(15),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!e)throw new Error("Can not create response without request");return n.clientRequest_=e,n}return u(t,e),i(t,[{key:"request",value:function(){return this.clientRequest_}},{key:"statusCode",value:function(e){return a.core.isDef(e)?(this.statusCode_=e,this):this.statusCode_}},{key:"statusText",value:function(e){return a.core.isDef(e)?(this.statusText_=e,this):this.statusText_}},{key:"succeeded",value:function(){return this.statusCode()>=200&&this.statusCode()<=399}}]),t}(l.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(){r(this,e)};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),a=r(i),s=n(0),l=n(9),c=r(l),f=n(24),h=r(f),d=n(29),p=r(d),y=n(30),v=r(y),b=n(31),_=r(b),g=n(1),m=r(g),w=n(6),k=r(w),O=n(5),P=r(O),A=n(13),S=r(A),j=n(23),N=r(j),E=n(3),C=n(4),D=r(C),T=n(2),U=void 0,R=void 0;void 0!==a.default.window&&(U=a.default.window.io),void 0!==a.default.window&&(R=a.default.window.FormData);var M=function(){function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];if(o(this,e),0===arguments.length)throw new Error("Invalid arguments, try `new WeDeploy(baseUrl, url)`");this.auth_=null,this.body_=null,this.url_=D.default.joinPaths.apply(D.default,[t||""].concat(r)),this.headers_=new E.MultiMap,this.params_=new E.MultiMap,this.withCredentials_=!0,this.header("Content-Type","application/json"),this.header("X-Requested-With","XMLHttpRequest")}return u(e,[{key:"auth",value:function(t,n){return this.auth_=c.default.create(t,n),this.auth_.setWedeployClient(e),this}},{key:"body",value:function(e){return this.body_=e,this}},{key:"convertBodyToParams_",value:function(e,t){s.core.isString(t)?t={body:t}:t instanceof m.default&&(t=t.body()),Object.keys(t||{}).forEach(function(n){return e.param(n,t[n])})}},{key:"createClientRequest_",value:function(e,t){var n=new N.default;return n.body(t||this.body_),s.core.isDefAndNotNull(n.body())||this.formData_&&n.body(this.formData_),n.method(e),n.headers(this.headers()),n.params(this.params()),n.url(this.url()),n.withCredentials(this.withCredentials_),this.encode(n),n}},{key:"decode",value:function(t){if(e.isContentTypeJson(t))try{t.body(JSON.parse(t.body()))}catch(e){}return t}},{key:"delete",value:function(e){return this.sendAsync("DELETE",e)}},{key:"encode",value:function(t){var n=t.body();if(s.core.isElement(n)&&(n=new R(n),t.body(n)),n=this.maybeWrapWithQuery_(n),"GET"===t.method()&&(this.convertBodyToParams_(t,n),t.removeBody(),n=null),void 0!==R&&n instanceof R)t.headers().remove("content-type");else if(n instanceof m.default)t.body(n.toString());else if(e.isContentTypeJson(t)){var r=t.body();s.core.isDefAndNotNull(r)&&(r=JSON.stringify(r),t.body(r))}return this.encodeParams_(t),this.resolveAuthentication_(t),t}},{key:"encodeParams_",value:function(e){var t=e.params();t.names().forEach(function(e){var n=t.getAll(e);n.forEach(function(e,t){e instanceof m.default?e=e.toString():(s.core.isObject(e)||e instanceof Array)&&(e=JSON.stringify(e)),n[t]=e})})}},{key:"form",value:function(e,t){if(void 0===R)throw new Error("form() is only available when FormData API is available.");return this.formData_||(this.formData_=new R),this.formData_.append(e,t),this}},{key:"get",value:function(e){return this.sendAsync("GET",e)}},{key:"header",value:function(e,t){if(2!==arguments.length)throw new Error("Invalid arguments");return this.headers_.set(e,t),this}},{key:"headers",value:function(e){var t=this;return s.core.isDefAndNotNull(e)?(e instanceof E.MultiMap||(e=E.MultiMap.fromObject(e)),e.names().forEach(function(n){e.getAll(n).forEach(function(e){t.headers_.set(n,e)})}),this):this.headers_}},{key:"maybeWrapWithQuery_",value:function(e){return e instanceof P.default&&(e=k.default.filter(e)),e}},{key:"param",value:function(e,t){if(2!==arguments.length)throw new Error("Invalid arguments");return this.params_.set(e,t),this}},{key:"params",value:function(){return this.params_}},{key:"patch",value:function(e){return this.sendAsync("PATCH",e)}},{key:"path",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=new(Function.prototype.bind.apply(e,[null].concat([this.url()],n)));return s.core.isDefAndNotNull(this.auth_)&&o.auth(this.auth_),o.headers(this.headers_),o.use(this.customTransport_)}},{key:"post",value:function(e){return this.sendAsync("POST",e)}},{key:"put",value:function(e){return this.sendAsync("PUT",e)}},{key:"resolveAuthentication_",value:function(e){if(this.auth_)if(this.auth_.hasToken())e.header("Authorization","Bearer "+this.auth_.token);else if(this.auth_.hasEmail()&&this.auth_.hasPassword()){var t=this.auth_.email+":"+this.auth_.password;e.header("Authorization","Basic "+_.default.encodeString(t))}}},{key:"sendAsync",value:function(e,t){var n=this.customTransport_||S.default.instance().getDefault(),r=this.createClientRequest_(e,t);return n.send(r).then(this.decode)}},{key:"url",value:function(){return this.url_}},{key:"use",value:function(e){return this.customTransport_=e,this}},{key:"watch",value:function(e,t){if(void 0===U)throw new Error("Socket.io client not loaded");var n=this.createClientRequest_("GET",e),r=new D.default(n.url());r.addParametersFromMultiMap(n.params());var o="undefined"==typeof navigator||"ReactNative"!==navigator.product;return t=t||{forceNew:!0,jsonp:o},t.query="url="+encodeURIComponent(r.getPathname()+r.getSearch()),t.path=t.path||r.getPathname(),t=this.resolveTransportOptions_(t),r.isUsingDefaultProtocol()&&r.setProtocol("https:"),U(r.getProtocol()+"//"+r.getHost(),t)}},{key:"resolveTransportOptions_",value:function(e){if(!this.auth_)return e;if(this.auth_.hasToken())e.transportOptions={polling:{extraHeaders:{Authorization:"Bearer "+this.auth_.getToken()}}};else if(this.auth_.hasEmail()&&this.auth_.hasPassword()){var t=this.auth_.getEmail()+":"+this.auth_.getPassword();e.transportOptions={polling:{extraHeaders:{Authorization:"Basic "+_.default.encodeString(t)}}}}return e}},{key:"withCredentials",value:function(e){return this.withCredentials_=!!e,this}}],[{key:"data",value:function(t){return(0,T.assertDefAndNotNull)(t,"The data url should be provided"),(0,T.assertUriWithNoPath)(t,"The data url should not have a path"),new p.default(e,t)}},{key:"email",value:function(t){return(0,T.assertDefAndNotNull)(t,"The email url should be provided"),(0,T.assertUriWithNoPath)(t,"The email url should not have a path"),new v.default(e,t)}},{key:"auth",value:function(t){return(0,T.assertDefAndNotNull)(t,"The auth url should be provided"),(0,T.assertUriWithNoPath)(t,"The auth url should not have a path"),new h.default(e,t)}},{key:"isContentTypeJson",value:function(e){return 0===(e.headers().get("content-type")||"").indexOf("application/json")}},{key:"socket",value:function(e){U=e}},{key:"formData",value:function(e){R=e}},{key:"url",value:function(t){return new e(t).use(this.customTransport_)}}]),e}();t.default=M},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(37),f=r(c),h=n(35),d=r(h),p=n(16),y=r(p),v=n(17),b=r(v),_=n(4),g=r(_),m=n(14),w=r(m),k=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"send",value:function(e){return this.request(e.url(),e.method(),e.body(),e.headers(),e.params(),null,!1).then(function(t){var n=new y.default(e);return n.body(t.body),n.statusCode(t.statusCode),n.statusText(l.default.STATUS_CODES[t.statusCode]),Object.keys(t.headers).forEach(function(e){n.header(e,t.headers[e])}),n})}},{key:"request",value:function(e,t,n,r,o,u){e=new g.default(e),e.isUsingDefaultProtocol()&&e.setProtocol("https:"),o&&e.addParametersFromMultiMap(o),e=e.toString();var i={method:t,uri:e};if(r){var a={};r.names().forEach(function(e){a[e]=r.getAll(e).join(", ")}),i.headers=a}var s=!1;n&&(n instanceof w.default?s=!0:i.body=n),u&&(i.timeout=u);var l=void 0;return new d.default(function(e,t){l=(0,f.default)(i,function(n,r){if(n)return void t(n);e(r)}),s&&(l._form=n)}).thenCatch(function(e){throw l.abort(),e})}}]),t}(b.default);t.default=k},function(e,t){e.exports=require("socket.io-client")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),c=n(7),f=r(c),h=function(){function e(t,n,r){i(this,e),this.field_=t,this.operator_=n,this.value_=r}return a(e,[{key:"getField",value:function(){return this.field_}},{key:"getOperator",value:function(){return this.operator_}},{key:"getValue",value:function(){return this.value_}}],[{key:"avg",value:function(t){return e.field(t,"avg")}},{key:"count",value:function(t){return e.field(t,"count")}},{key:"distance",value:function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),u=2;u<r;u++)o[u-2]=arguments[u];return new(Function.prototype.bind.apply(e.DistanceAggregation,[null].concat([t,n],o)))}},{key:"extendedStats",value:function(t){return e.field(t,"extendedStats")}},{key:"histogram",value:function(t,n){return new e(t,"histogram",n)}},{key:"max",value:function(t){return e.field(t,"max")}},{key:"min",value:function(t){return e.field(t,"min")}},{key:"missing",value:function(t){return e.field(t,"missing")}},{key:"field",value:function(t,n){return new e(t,n)}},{key:"range",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new(Function.prototype.bind.apply(e.RangeAggregation,[null].concat([t],r)))}},{key:"stats",value:function(t){return e.field(t,"stats")}},{key:"sum",value:function(t){return e.field(t,"sum")}},{key:"terms",value:function(t){return e.field(t,"terms")}}]),e}(),d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"geoDistance",{}));r.value_.location=l.default.toBody(n);for(var u=arguments.length,a=Array(u>2?u-2:0),s=2;s<u;s++)a[s-2]=arguments[s];return r.value_.ranges=a.map(function(e){return e.body()}),r}return u(t,e),a(t,[{key:"range",value:function(e,t){var n=e;return n instanceof f.default||(n=f.default.range(e,t)),this.value_.ranges.push(n.body()),this}},{key:"unit",value:function(e){return this.value_.unit=e,this}}]),t}(h);h.DistanceAggregation=d;var p=function(e){function t(e){i(this,t);for(var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"range")),r=arguments.length,u=Array(r>1?r-1:0),a=1;a<r;a++)u[a-1]=arguments[a];return n.value_=u.map(function(e){return e.body()}),n}return u(t,e),a(t,[{key:"range",value:function(e,t){var n=e;return n instanceof f.default||(n=f.default.range(e,t)),this.value_.push(n.body()),this}}]),t}(h);h.RangeAggregation=p,t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),i=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(){function e(t,n,o){r(this,e);var i={operator:u.core.isDef(o)?n:"="},s=u.core.isDef(o)?o:n;u.core.isDefAndNotNull(s)&&(s instanceof a.default&&(s=s.body()),i.value=s),u.core.isDefAndNotNull(t)?this.createBody_(t,i):this.createBody_("and",[])}return o(e,[{key:"add",value:function(e,t){t?this.addArrayOperator_(e,t):this.createBody_(e,this.body_)}},{key:"addArrayOperator_",value:function(e,t){this.body_[e]instanceof Array||this.createBody_(e,[this.body_]),this.body_[e].push(t.body())}},{key:"addMany",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o=0;o<n.length;o++)this.add(e,n[o])}},{key:"createBody_",value:function(e,t){this.body_={},this.body_[e]=t}},{key:"getObject",value:function(){return this.body_}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),s=n(15),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(3),f=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.params_=new c.MultiMap,e.withCredentials_=!0,e}return u(t,e),i(t,[{key:"withCredentials",value:function(e){return a.core.isDef(e)?(this.withCredentials_=!!e,this):this.withCredentials_}},{key:"method",value:function(e){return a.core.isDef(e)?(this.method_=e,this):this.method_||t.DEFAULT_METHOD}},{key:"param",value:function(e,t){if(2!==arguments.length)throw new Error("Invalid arguments");return this.params_.set(e,t),this}},{key:"params",value:function(e){return a.core.isDef(e)?(e instanceof c.MultiMap?this.params_=e:this.params_.values=e,e):this.params_}},{key:"url",value:function(e){return a.core.isDef(e)?(this.url_=e,this):this.url_}}]),t}(l.default);f.DEFAULT_METHOD="GET",t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){switch(e.constructor.PROVIDER){case p.default.PROVIDER:case v.default.PROVIDER:case m.default.PROVIDER:break;default:throw new Error("Sign-in provider not supported")}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(9),c=r(l),f=n(8),h=r(f),d=n(25),p=r(d),y=n(26),v=r(y),b=n(11),_=r(b),g=n(27),m=r(g),w=n(36),k=n(2),O=function(e){function t(e,n){o(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.currentUser=null,r.onSignInCallback=null,r.onSignOutCallback=null,r.authUrl=n,w.LocalStorageMechanism.isSupported()&&(r.storage=new w.Storage(new w.LocalStorageMechanism)),r.processSignIn_(),r.provider={Facebook:p.default,Google:m.default,Github:v.default},r}return i(t,e),s(t,[{key:"createAccessTokenCookie",value:function(e){_.default.document&&_.default.window&&(_.default.document.cookie="access_token="+e+"; Domain="+_.default.window.location.hostname+";")}},{key:"createAuthFromData",value:function(e){var t=c.default.createFromData(e,this.authUrl);return t.setWedeployClient(this.wedeployClient,this.authUrl),t}},{key:"createUser",value:function(e){var t=this;(0,k.assertObject)(e,"User data must be specified as object");var n=this.buildUrl_().path("/users"),r=this.resolveAuthScope();return r&&n.auth(r.token),n.post(e).then(function(e){return(0,k.assertResponseSucceeded)(e)}).then(function(e){return t.createAuthFromData(e.body())})}},{key:"deleteAccessTokenCookie",value:function(){_.default.document&&_.default.window&&(_.default.document.cookie="access_token=;expires=Thu, 01 Jan 1970 00:00:01 GMT;Domain="+_.default.window.location.hostname+";")}},{key:"deleteUser",value:function(e){return(0,k.assertDefAndNotNull)(e,"Cannot delete user without id"),(0,k.assertUserSignedIn)(this.currentUser),this.buildUrl_().path("/users",e).auth(this.resolveAuthScope().token).delete().then(function(e){return(0,k.assertResponseSucceeded)(e)})}},{key:"getAllUsers",value:function(){var e=this;return(0,k.assertUserSignedIn)(this.currentUser),this.buildUrl_().path("/users").auth(this.resolveAuthScope().token).get().then(function(e){return(0,k.assertResponseSucceeded)(e)}).then(function(t){return t.body().map(e.createAuthFromData,e)})}},{key:"getHrefWithoutFragment_",value:function(){var e=_.default.window.location;return e.protocol+"//"+e.host+e.pathname+(e.search?e.search:"")}},{key:"getRedirectAccessToken_",value:function(){if(_.default.window&&_.default.window.location){var e=_.default.window.location.hash;if(0===e.indexOf("#access_token="))return e.substring(14)}return null}},{key:"getUser",value:function(e){var t=this;return(0,k.assertDefAndNotNull)(e,"User userId must be specified"),(0,k.assertUserSignedIn)(this.currentUser),this.buildUrl_().path("/users",e).auth(this.resolveAuthScope().token).get().then(function(e){return(0,k.assertResponseSucceeded)(e)}).then(function(e){return t.createAuthFromData(e.body())})}},{key:"loadCurrentUser",value:function(e){var t=this;return this.verifyUser(e).then(function(e){return t.currentUser=e,t.storage&&t.storage.set("currentUser",e),t.currentUser.hasToken()&&t.createAccessTokenCookie(t.currentUser.getToken()),t.currentUser})}},{key:"maybeCallOnSignInCallback_",value:function(){this.onSignInCallback&&this.onSignInCallback.call(this,this.currentUser)}},{key:"maybeCallOnSignOutCallback_",value:function(){this.onSignOutCallback&&this.onSignOutCallback.call(this,this.currentUser)}},{key:"onSignIn",value:function(e){(0,k.assertFunction)(e,"Sign-in callback must be a function"),this.onSignInCallback=e}},{key:"onSignOut",value:function(e){(0,k.assertFunction)(e,"Sign-out callback must be a function"),this.onSignOutCallback=e}},{key:"processSignIn_",value:function(){var e=this,t=this.getRedirectAccessToken_();if(t)return this.removeUrlFragmentCompletely_(),void this.loadCurrentUser(t).then(function(){return e.maybeCallOnSignInCallback_()});var n=this.storage&&this.storage.get("currentUser");n&&(this.currentUser=this.createAuthFromData(n))}},{key:"removeUrlFragmentCompletely_",value:function(){_.default.window.history.pushState({},"",_.default.window.location.pathname+_.default.window.location.search)}},{key:"resolveAuthScope",value:function(){return this.helperAuthScope?this.helperAuthScope:this.currentUser}},{key:"sendPasswordResetEmail",value:function(e){return(0,k.assertDefAndNotNull)(e,"Send password reset email must be specified"),this.buildUrl_().path("/user/recover").param("email",e).post().then(function(e){return(0,k.assertResponseSucceeded)(e)})}},{key:"signInWithEmailAndPassword",value:function(e,t){var n=this;return(0,k.assertDefAndNotNull)(e,"Sign-in email must be specified"),(0,k.assertDefAndNotNull)(t,"Sign-in password must be specified"),this.buildUrl_().path("/oauth/token").param("grant_type","password").param("username",e).param("password",t).get().then(function(e){return(0,k.assertResponseSucceeded)(e)}).then(function(e){return n.loadCurrentUser(e.body().access_token)}).then(function(e){return n.maybeCallOnSignInCallback_(),e})}},{key:"signInWithRedirect",value:function(e){(0,k.assertBrowserEnvironment)(),(0,k.assertDefAndNotNull)(e,"Sign-in provider must be defined"),a(e),e.hasRedirectUri()||e.setRedirectUri(this.getHrefWithoutFragment_()),_.default.window.location.href=e.makeAuthorizationUrl(this.authUrl)}},{key:"signOut",value:function(){var e=this;return(0,k.assertUserSignedIn)(this.currentUser),this.buildUrl_().path("/oauth/revoke").param("token",this.currentUser.token).get().then(function(e){return(0,k.assertResponseSucceeded)(e)}).then(function(t){return e.maybeCallOnSignOutCallback_(),e.unloadCurrentUser_(),t})}},{key:"buildUrl_",value:function(){return this.wedeployClient.url(this.authUrl).headers(this.headers_)}},{key:"unloadCurrentUser_",value:function(){this.currentUser=null,this.storage&&this.storage.remove("currentUser"),this.deleteAccessTokenCookie()}},{key:"verifyToken",value:function(e){return(0,k.assertDefAndNotNull)(e,"Token must be specified"),this.buildUrl_().path("/oauth/tokeninfo").param("token",e).get().then(function(e){return(0,k.assertResponseSucceeded)(e)}).then(function(e){return e.body()})}},{key:"verifyUser",value:function(e,t){var n=this;return(0,k.assertDefAndNotNull)(e,"Token or email must be specified"),this.buildUrl_().path("/user").auth(e,t).get().then(function(e){return(0,k.assertResponseSucceeded)(e)}).then(function(r){var o=r.body();return t?(o.email=e,o.password=t):o.token=e,n.createAuthFromData(o)})}}]),t}(h.default);t.default=O},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.provider=t.PROVIDER,e}return u(t,e),t}(a.default);s.PROVIDER="facebook",t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.provider=t.PROVIDER,e}return u(t,e),t}(a.default);s.PROVIDER="github",t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.provider=t.PROVIDER,e}return u(t,e),t}(a.default);s.PROVIDER="google",t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(34),l=r(s),c=n(16),f=r(c),h=n(17),d=r(h),p=n(4),y=r(p),v=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"send",value:function(e){var t=new y.default(e.url());return t.isUsingDefaultProtocol()&&t.setProtocol("https:"),l.default.request(t.toString(),e.method(),e.body(),e.headers(),e.params(),null,!1,e.withCredentials()).then(function(t){var n=new f.default(e);return n.body(t.responseText),n.statusCode(t.status),n.statusText(t.statusText),l.default.parseResponseHeaders(t.getAllResponseHeaders()).forEach(function(e){n.header(e.name,e.value)}),n})}}]),t}(d.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),l=r(s),c=n(6),f=r(c),h=n(5),d=r(h),p=n(2),y=n(0),v=function(e){function t(e,n){o(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isSearch_=!1,r.dataUrl=n,r}return i(t,e),a(t,[{key:"where",value:function(e,t,n){return this.getOrCreateFilter_().and(e,t,n),this}},{key:"or",value:function(e,t,n){if(0===this.getOrCreateFilter_().body().and.length)throw Error("It's required to have a condition before using an 'or()' for the first time.");return this.getOrCreateFilter_().or(e,t,n),this}},{key:"none",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.where(d.default.none(e,n))}},{key:"match",value:function(e,t){return this.where(d.default.match(e,t))}},{key:"prefix",value:function(e,t){return this.where(d.default.prefix(e,t))}},{key:"similar",value:function(e,t){return this.where(d.default.similar(e,t))}},{key:"lt",value:function(e,t){return this.where(d.default.lt(e,t))}},{key:"lte",value:function(e,t){return this.where(d.default.lte(e,t))}},{key:"gt",value:function(e,t){return this.where(d.default.gt(e,t))}},{key:"gte",value:function(e,t){return this.where(d.default.gte(e,t))}},{key:"any",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.where(d.default.any(e,n))}},{key:"boundingBox",value:function(e,t,n){return this.where(d.default.boundingBox(e,t,n))}},{key:"distance",value:function(e,t,n){return this.where(d.default.distance(e,t,n))}},{key:"range",value:function(e,t,n){return this.where(d.default.range(e,t,n))}},{key:"limit",value:function(e){return this.getOrCreateQuery_().limit(e),this}},{key:"offset",value:function(e){return this.getOrCreateQuery_().offset(e),this}},{key:"highlight",value:function(e){return this.getOrCreateQuery_().highlight(e),this}},{key:"aggregate",value:function(e,t,n){return this.getOrCreateQuery_().aggregate(e,t,n),this}},{key:"count",value:function(){return this.getOrCreateQuery_().type("count"),this}},{key:"orderBy",value:function(e,t){return this.getOrCreateQuery_().sort(e,t),this}},{key:"create",value:function(e,t){return(0,p.assertDefAndNotNull)(e,"Collection key must be specified."),(0,p.assertObject)(t,"Data can't be empty."),this.buildUrl_().path(e).post(t).then(function(e){return(0,p.assertResponseSucceeded)(e)}).then(function(e){return e.body()})}},{key:"replace",value:function(e,t){return(0,p.assertDefAndNotNull)(e,"Document key must be specified."),(0,p.assertObject)(t,"Data must be specified."),this.buildUrl_().path(e).put(t).then(function(e){return(0,p.assertResponseSucceeded)(e)}).then(function(e){return e.body()})}},{key:"update",value:function(e,t){return(0,p.assertDefAndNotNull)(e,"Document key must be specified."),(0,p.assertObject)(t,"Data must be specified."),this.buildUrl_().path(e).patch(t).then(function(e){return(0,p.assertResponseSucceeded)(e)}).then(function(e){return e.body()})}},{key:"delete",value:function(e){return(0,p.assertDefAndNotNull)(e,"Document/Field/Collection key must be specified"),this.buildUrl_().path(e).delete().then(function(e){return(0,p.assertResponseSucceeded)(e)}).then(function(){})}},{key:"get",value:function(e){return(0,p.assertDefAndNotNull)(e,"Document/Field/Collection key must be specified"),this.buildUrl_().path(e).get(this.processAndResetQueryState()).then(function(e){return(0,p.assertResponseSucceeded)(e)}).then(function(e){return e.body()})}},{key:"search",value:function(e){return(0,p.assertDefAndNotNull)(e,"Document/Field/Collection key must be specified"),this.isSearch_=!0,this.buildUrl_().path(e).get(this.processAndResetQueryState()).then(function(e){return(0,p.assertResponseSucceeded)(e)}).then(function(e){return e.body()})}},{key:"watch",value:function(e,t){return(0,p.assertDefAndNotNull)(e,"Collection key must be specified"),this.buildUrl_().path(e).watch(this.processAndResetQueryState(),t)}},{key:"buildUrl_",value:function(){return this.wedeployClient.url(this.dataUrl).headers(this.headers_).auth(this.helperAuthScope)}},{key:"getOrCreateFilter_",value:function(){return this.filter_||(this.filter_=new d.default),this.filter_}},{key:"getOrCreateQuery_",value:function(){return this.query_||(this.query_=new f.default),this.query_}},{key:"processAndResetQueryState",value:function(){var e=void 0;y.core.isDefAndNotNull(this.filter_)&&(e=this.getOrCreateFilter_()),this.isSearch_?this.getOrCreateQuery_().search(e):e&&this.getOrCreateQuery_().filter(e);var t=this.query_;return this.headers_.clear(),this.filter_=null,this.isSearch_=!1,this.query_=null,t}}]),t}(l.default);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=n(3),l=n(8),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f=function(e){function t(e,n){r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return u.emailUrl=n,u.params=new s.MultiMap,u}return u(t,e),i(t,[{key:"from",value:function(e){return(0,a.assertDefAndNotNull)(e,'Parameter "from" must be specified'),this.params.set("from",e),this}},{key:"bcc",value:function(e){return(0,a.assertDefAndNotNull)(e,'Parameter "bcc" must be specified'),this.params.add("bcc",e),this}},{key:"cc",value:function(e){return(0,a.assertDefAndNotNull)(e,'Parameter "cc" must be specified'),this.params.add("cc",e),this}},{key:"message",value:function(e){return(0,a.assertDefAndNotNull)(e,'Parameter "message" must be specified'),this.params.set("message",e),this}},{key:"priority",value:function(e){return(0,a.assertDefAndNotNull)(e,'Parameter "priority" must be specified'),this.params.set("priority",e),this}},{key:"replyTo",value:function(e){return(0,a.assertDefAndNotNull)(e,'Parameter "replyTo" must be specified'),this.params.set("replyTo",e),this}},{key:"to",value:function(e){return(0,a.assertDefAndNotNull)(e,'Parameter "to" must be specified'),this.params.add("to",e),this}},{key:"subject",value:function(e){return(0,a.assertDefAndNotNull)(e,'Parameter "subject" must be specified'),this.params.set("subject",e),this}},{key:"send",value:function(){var e=this,t=this.buildUrl_().path("emails");return this.params.names().forEach(function(n){e.params.getAll(n).forEach(function(e){t.form(n,e)})}),this.params.clear(),this.headers_.clear(),t.post().then(function(e){return(0,a.assertResponseSucceeded)(e)}).then(function(e){return e.body()})}},{key:"status",value:function(e){return(0,a.assertDefAndNotNull)(e,'Parameter "emailId" param must be specified'),this.buildUrl_().path("emails",e,"status").get().then(function(e){return(0,a.assertResponseSucceeded)(e)}).then(function(e){return e.body()})}},{key:"buildUrl_",value:function(){return this.wedeployClient.url(this.emailUrl).headers(this.headers_).auth(this.helperAuthScope)}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"encodeString",value:function(e){return"function"==typeof btoa?btoa(e):new Buffer(e.toString(),"binary").toString("base64")}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(20),u=r(o),i=n(5),a=r(i),s=n(12),l=r(s),c=n(6),f=r(c),h=n(18),d=r(h),p=n(19),y=r(p),v=n(7),b=r(v),_=n(13),g=r(_),m=n(14),w=r(m);"undefined"!=typeof navigator&&"ReactNative"===navigator.product||(g.default[g.default.DEFAULT_TRANSPORT_NAME]=y.default),d.default.socket(u.default),d.default.formData(w.default),d.default.Filter=a.default,d.default.Geo=l.default,d.default.Query=f.default,d.default.Range=b.default,d.default.WeDeploy=d.default,e.exports=d.default},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("metal-ajax")},function(e,t){e.exports=require("metal-promise")},function(e,t){e.exports=require("metal-storage")},function(e,t){e.exports=require("request")}]);